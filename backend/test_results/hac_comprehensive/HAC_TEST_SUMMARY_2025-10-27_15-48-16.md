# HAC Clustering Test Results
**Date**: 2025-10-27 15:48:16
**Configuration**: OPENAI-LARGE + HAC
**Dataset**: sample_data_500.csv (739 company names)

---

## Performance Summary

| Configuration | F1 Score | Precision | Recall | Processing Time | Groups |
|---------------|----------|-----------|--------|-----------------|--------|
| HAC-0.42 (Default - 58% similarity) | 43.99% | 99.75% | 28.22% | 12.6s | 490 |
| HAC-0.30 (Conservative - 70% similarity) | 43.99% | 99.75% | 28.22% | 14.5s | 490 |
| HAC-0.50 (Permissive - 50% similarity) | 72.17% | 96.69% | 57.57% | 12.7s | 337 |

---

## HAC-0.42 (Default - 58% similarity)

### Configuration
- **Embedding Mode**: openai-large
- **Clustering Mode**: hac
- **HAC Threshold**: 0.42 (Similarity: 58%)
- **HAC Linkage**: average

### Performance Metrics
- **F1 Score**: 43.99%
- **Precision**: 99.75%
- **Recall**: 28.22%
- **Processing Time**: 12.6 seconds

### Error Analysis
- **True Positives**: 401 pairs correctly grouped
- **False Positives**: 1 pairs incorrectly grouped
- **False Negatives**: 1,020 pairs missed

### Grouping Statistics
- **Total Input Names**: 739
- **Groups Created**: 490
- **Reduction**: 33.7%
- **Average Group Size**: 1.51

### HAC Quality Metrics
- **Cophenetic Correlation**: 0.5768 (measures how well dendrogram preserves distances)
- **Singleton Clusters**: 350 (names that didn't match anything)
- **Max Cluster Size**: 5 names
- **Avg Distance (all pairs)**: 0.8539
- **Avg Distance (within clusters)**: 0.0000

---

## HAC-0.30 (Conservative - 70% similarity)

### Configuration
- **Embedding Mode**: openai-large
- **Clustering Mode**: hac
- **HAC Threshold**: 0.3 (Similarity: 70%)
- **HAC Linkage**: average

### Performance Metrics
- **F1 Score**: 43.99%
- **Precision**: 99.75%
- **Recall**: 28.22%
- **Processing Time**: 14.5 seconds

### Error Analysis
- **True Positives**: 401 pairs correctly grouped
- **False Positives**: 1 pairs incorrectly grouped
- **False Negatives**: 1,020 pairs missed

### Grouping Statistics
- **Total Input Names**: 739
- **Groups Created**: 490
- **Reduction**: 33.7%
- **Average Group Size**: 1.51

### HAC Quality Metrics
- **Cophenetic Correlation**: 0.5768 (measures how well dendrogram preserves distances)
- **Singleton Clusters**: 350 (names that didn't match anything)
- **Max Cluster Size**: 5 names
- **Avg Distance (all pairs)**: 0.8539
- **Avg Distance (within clusters)**: 0.0000

---

## HAC-0.50 (Permissive - 50% similarity)

### Configuration
- **Embedding Mode**: openai-large
- **Clustering Mode**: hac
- **HAC Threshold**: 0.5 (Similarity: 50%)
- **HAC Linkage**: average

### Performance Metrics
- **F1 Score**: 72.17%
- **Precision**: 96.69%
- **Recall**: 57.57%
- **Processing Time**: 12.7 seconds

### Error Analysis
- **True Positives**: 818 pairs correctly grouped
- **False Positives**: 28 pairs incorrectly grouped
- **False Negatives**: 603 pairs missed

### Grouping Statistics
- **Total Input Names**: 739
- **Groups Created**: 337
- **Reduction**: 54.4%
- **Average Group Size**: 2.19

### HAC Quality Metrics
- **Cophenetic Correlation**: 0.5768 (measures how well dendrogram preserves distances)
- **Singleton Clusters**: 179 (names that didn't match anything)
- **Max Cluster Size**: 8 names
- **Avg Distance (all pairs)**: 0.8539
- **Avg Distance (within clusters)**: 0.2416

---

## Comparison with Baseline (from previous tests)

| Method | F1 Score | Precision | Recall | Time | Notes |
|--------|----------|-----------|--------|------|-------|
| **Fixed Threshold** | 82.4% | 93.0% | 74.0% | <1s | Original baseline |
| **Adaptive GMM** | 80.1% | 90.3% | 71.9% | 78s | Unstable, varies |
| **HAC (0.42)** | 44.0% | 99.8% | 28.2% | 13s | Deterministic |
| **HAC (0.3)** | 44.0% | 99.8% | 28.2% | 15s | Deterministic |
| **HAC (0.5)** | 72.2% | 96.7% | 57.6% | 13s | Deterministic |

---

## Key Findings

### Best Configuration: HAC-0.50 (Permissive - 50% similarity)

- **F1 Score**: 72.17%
- **Threshold**: 0.5 (50% similarity)
- **Processing Time**: 12.7s

### Advantages of HAC

